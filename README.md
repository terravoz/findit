# Getting started on a Drupal project

This guide helps you jumpstart working on a Drupal project with Agaric. It assumes you are familiar with git and working on the command line.

## Install Virtualbox and Vagrant

Download and install Virtualbox on your system from https://www.virtualbox.org/wiki/Downloads.
Download and install Vagrant on your system from http://www.vagrantup.com/downloads.html.

### Additional requirements

This virtualbox needs root. On Linux this means that it requires you to give it access via polkit.
The box also needs NFS, so won’t run on Windows. Make sure the NFS server is installed and running, and that your firewall gives the vbox interface access.

## Clone the repository and create a virtual development environment

    $ git clone git@github.com:terravoz/findit.git
    $ cd findit
    $ vagrant up

If this is your first project using the box specified in the Vagrantfile it will be downloaded. This can take a while.

If your default vagrant provider is not virtualbox remember you’ll need to specify it:

    $ vagrant up --provider virtualbox

## Install Drupal with custom profile

The project has a custom installation profile. Log in to the virutal machine and install Drupal using the profile:

    $ vagrant ssh
    $ cd /vagrant
    $ drush si -y findit

## Tell git who you are

    $ git config --global user.name "Jean R. Hacker"
    $ git config --global user.email "jean@agaric.com"

If you prefer different identities for other projects replace *global* with *local* in the above command.

## Create a personal excludesfile

    $ touch ~/.gitignore
    $ git config --global core.excludesfile ~/.gitignore

> Patterns which a user wants git to ignore in all situations (e.g., backup or temporary files generated by the user’s editor of choice) generally go into a file specified by core.excludesfile in the user’s ~/.gitconfig. — gitignore manual page

## Develop

Pick a ticket, create a branch referencing the ticket number, e.g. `git checkout -b project-123`. Commit your code in small chunks capturing logical steps and follow the [Drupal coding standards](https://drupal.org/coding-standards) and the [guidelines for commit messages](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html). All configuration that accompanies your code, e.g. creating fields and content types, must be scripted in an update hook. Once your work is done request a review and eventually your code will get merged into the master branch.

### Run tests

In the virtual machine you can run integration tests with phpunit.

    $ vagrant ssh
    $ cd /vagrant
    $ rake tests:integration
